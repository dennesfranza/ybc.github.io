import{af as n}from"./index.5df2bc92.js";import{b as a}from"./axios.a63e1254.js";var c={locationtableindexcolumns:[{name:"name",label:"Warehouse/Site Name",field:"name",align:"left"},{name:"location",label:"Address",field:"location",align:"left"}],locationtableindexrows:[],locationtableindexloading:!1,locationadddialog:!1,locationrequestinput:[{name:"name",label:"Warehouse/Project/Site",icon:"123",type:"input"},{name:"location",label:"Address",icon:"map",type:"input"}],locationrequestitem:{name:"",location:""},locationrequestedititem:{id:null,name:"",location:""},locationpostrequestitemloading:!1,locationremoverequestitemloading:!1,locationupdaterequestitemloading:!1,locationeditdialog:!1,selected:[]};const d=o=>{o.locationtableindexloading=!0,a.get("warehouse/").then(e=>{e.status===200&&(o.locationtableindexrows=e.data.results)}).catch(e=>{console.log(e)}).finally(()=>{setTimeout(()=>{o.locationtableindexloading=!1},2e3)})},s=o=>{o.locationadddialog=!0},r=o=>{o.locationrequestitem={name:"",location:""},o.locationadddialog=!1},u=o=>{o.locationpostrequestitemloading=!0,a.post("warehouse/",o.locationrequestitem).then(e=>{e.status===201&&(console.log(e),o.locationtableindexrows.push(e.data))}).catch(e=>{console.log(e)}).finally(()=>{o.locationrequestitem={name:"",location:""},setTimeout(()=>{o.locationadddialog=!1,o.locationpostrequestitemloading=!1},2e3)})},m=o=>{let e=o.selected[0];o.locationremoverequestitemloading=!0,a.delete(`warehouse/${e.id}/`).then(t=>{if(t.status===204){let i=o.locationtableindexrows.findIndex(l=>l.id===e.id);o.locationtableindexrows.splice(i,1),o.selected=[]}}).catch(t=>{console.log(t)}).finally(()=>{setTimeout(()=>{o.locationremoverequestitemloading=!1},2e3)})},g=o=>{let e=o.selected[0];o.locationrequestedititem.id=e.id,o.locationrequestedititem.name=e.name,o.locationrequestedititem.location=e.location,o.locationeditdialog=!0},f=o=>{o.locationrequestedititem={id:null,name:"",location:""},o.locationeditdialog=!1,o.selected=[]},p=o=>{let e=o.locationrequestedititem;o.locationupdaterequestitemloading=!0,a.put(`warehouse/${e.id}/`,e).then(t=>{if(t.status===200){let i=o.locationtableindexrows.findIndex(l=>l.id===t.data.id);o.locationtableindexrows[i].name=t.data.name,o.locationtableindexrows[i].location=t.data.location}}).catch(t=>{console.log(t)}).finally(()=>{setTimeout(()=>{o.locationupdaterequestitemloading=!1,o.locationeditdialog=!1,o.selected=[],o.locationrequestedititem={id:null,name:"",location:""}},2e3)})},b=n("locationstore",{state:()=>c,getters:{hasSelection:o=>o.selected.length>0,locationOptions:o=>o.locationtableindexrows.map(e=>({label:e.name,value:e.id}))},actions:{loadLocations(){d(this)},openAddLocationDialog(){s(this)},closeAddLocationDialog(){r(this)},postLocationItem(){u(this)},removeLocationItem(){m(this)},openUpdateLocationDialog(){g(this)},closeUpdateLocationDialog(){f(this)},updateLocationItem(){p(this)}},persist:!0});export{b as u};
