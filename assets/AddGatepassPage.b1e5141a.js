import{d as q,c,r as y,_ as U,M as v,C as d,G as f,H as t,f as a,K as b,L as S,D as G,E as F,F as I,N as i,J as r,Q as n,O as w,g as B,x as P}from"./index.7c7b8282.js";import{Q as u}from"./QInput.321b8eed.js";import{e as N,f as Q,Q as H}from"./QTable.a5502490.js";import{Q as O,a as L}from"./QPopupProxy.db37d52e.js";import{Q as V}from"./QTooltip.574840fb.js";import{Q as $}from"./QPage.9773e727.js";import{C as M}from"./ClosePopup.c5e1e30c.js";import{u as R,F as T}from"./FormHeader.bdc211c4.js";import{u as E}from"./index.e2cb4afa.js";import{u as j}from"./index.657cef26.js";import{u as A}from"./index.af01c2b5.js";import{u as J}from"./index.aa89ca5c.js";import{Q as C}from"./QCardSection.7cfc943c.js";import{Q as h}from"./QSeparator.7443f346.js";import{Q as K,a as z}from"./QItem.09a728d7.js";import{Q as W}from"./QCardActions.3b0fd6c6.js";import{Q as X}from"./QCard.fd6c76dc.js";import{u as Y}from"./index.018cca22.js";import"./use-key-composition.a804c2f6.js";import"./use-dark.f1ed3aaa.js";import"./use-id.52264d24.js";import"./uid.42677368.js";import"./use-form.8f60a875.js";import"./QList.51621a8d.js";import"./rtl.b51694b1.js";import"./QItemLabel.b8289c17.js";import"./format.65a6df85.js";import"./QCheckbox.8583a2e3.js";import"./use-cache.b0833c75.js";import"./date.f405f89b.js";import"./use-quasar.0035955d.js";import"./axios.56601fbe.js";const Z=q({name:"gatepass",setup(){const e=A(),s=Y(),p=c(()=>e.gatepassinput),m=c(()=>e.gate_pass_items),g=c(()=>e.gatepasscreateitem);return{gatepassstore:e,consumablesstore:s,gatepassinput:p,gate_pass_items:m,gatepasscreateitem:g,options:y([])}},methods:{addItem(){this.gatepasscreateitem.gate_pass_items.unshift(this.gate_pass_items),this.gatepassstore.closeAddGatepassDialog()},filterFn(e,s,p){s(()=>{e===""?this.options=y([]):this.consumablesstore.searchConsumable(e)})},updateModelValue(e){this.gate_pass_items.description=e;let s=this.consumablesstore.consumablesearchresults.find(p=>p.id===e);this.gate_pass_items.description_label=s.name}}}),x=r("h6",null,"Add Gatepass Item",-1);function ee(e,s,p,m,g,k){const _=v("q-row");return d(),f($,{class:"q-pa-sm"},{default:t(()=>[a(N,{modelValue:e.gatepassstore.addgatepassdialog,"onUpdate:modelValue":s[1]||(s[1]=l=>e.gatepassstore.addgatepassdialog=l),"backdrop-filter":"blur(4px)",persistent:""},{default:t(()=>[a(X,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[a(C,null,{default:t(()=>[x]),_:1}),a(h),b(" "+S(e.gate_pass_items)+" ",1),a(C,{class:"scroll"},{default:t(()=>[(d(!0),G(I,null,F(e.gatepassinput,l=>(d(),f(_,{class:"q-gutter-xs",key:l.name},{default:t(()=>[l.name==="quantity"?(d(),f(u,{key:0,filled:"",label:l.label,modelValue:e.gate_pass_items[l.name],"onUpdate:modelValue":o=>e.gate_pass_items[l.name]=o,type:"number"},{prepend:t(()=>[a(n,{name:l.icon,color:"black"},null,8,["name"])]),_:2},1032,["label","modelValue","onUpdate:modelValue"])):l.name!="quantity"?(d(),f(u,{key:1,filled:"",label:l.label,modelValue:e.gate_pass_items[l.name],"onUpdate:modelValue":o=>e.gate_pass_items[l.name]=o},{prepend:t(()=>[a(n,{name:l.icon,color:"black"},null,8,["name"])]),_:2},1032,["label","modelValue","onUpdate:modelValue"])):w("",!0),l.type==="select"?(d(),f(Q,{key:2,label:l.label,modelValue:e.gate_pass_items[l.name],"onUpdate:modelValue":[o=>e.gate_pass_items[l.name]=o,e.updateModelValue],"use-input":"","hide-selected":"",filled:"","fill-input":"","map-options":"","emit-value":"","input-debounce":"0",options:e.consumablesstore.consumableOptions,onFilter:e.filterFn},{"no-option":t(()=>[a(K,null,{default:t(()=>[a(z,{class:"text-grey"},{default:t(()=>[b(" No results ")]),_:1})]),_:1})]),prepend:t(()=>[a(n,{name:l.icon,color:"black"},null,8,["name"])]),_:2},1032,["label","modelValue","onUpdate:modelValue","options","onFilter"])):w("",!0)]),_:2},1024))),128))]),_:1}),a(h),a(W,{align:"left"},{default:t(()=>[a(i,{outline:"",label:"Close",color:"red",onClick:s[0]||(s[0]=l=>e.gatepassstore.closeAddGatepassDialog())}),a(i,{outline:"",label:"Add",color:"blue",onClick:e.addItem},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue","backdrop-filter"])]),_:1})}var ae=U(Z,[["render",ee]]);const se=q({name:"gatepass",setup(){const e=R(),s=E(),p=j(),m=A(),g=J(),k=e[B().type.name],_=c(()=>m.createtablecolumn),l=c(()=>m.createtablerows),o=c(()=>g.preparedByOptions),D=c(()=>m.gatepasscreateitem);return{formheaders:e,locationstore:s,userstore:p,gatepassstore:m,loginstore:g,formHeader:k,createtablecolumn:_,createtablerows:l,preparedByOptions:o,gatepasscreateitem:D}},components:{FormHeaderVue:T,AddGatepassDialog:ae}}),te={class:"row items-center"},oe={class:"col q-pa-sm"},le={class:"col q-pa-sm"},re={class:"col q-pa-sm"},ne={class:"col q-pa-sm"},pe={class:"row items-center justify-end"},me={class:"q-pt-md"},de={class:"row items-center"},ie={class:"col q-pa-sm"},ue={class:"col q-pa-sm"},ce={class:"row items-center"},ge={class:"col q-pa-sm"};function fe(e,s,p,m,g,k){const _=v("form-header-vue"),l=v("AddGatepassDialog");return d(),f($,{class:"q-pa-sm"},{default:t(()=>[a(_,{headers:e.formHeader.headers,name:`Create ${e.formHeader.name}`},null,8,["headers","name"]),r("div",te,[r("div",oe,[a(u,{modelValue:e.gatepasscreateitem.gp_number,"onUpdate:modelValue":s[0]||(s[0]=o=>e.gatepasscreateitem.gp_number=o),label:"Gate Pass Number"},{prepend:t(()=>[a(n,{name:"123",color:"black"})]),_:1},8,["modelValue"])]),r("div",le,[a(u,{modelValue:e.gatepasscreateitem.please_allow,"onUpdate:modelValue":s[1]||(s[1]=o=>e.gatepasscreateitem.please_allow=o),label:"Please Allow Mr/Mrs"},{prepend:t(()=>[a(n,{name:"person",color:"black"})]),_:1},8,["modelValue"])]),r("div",re,[a(Q,{label:"Location",options:e.locationstore.locationOptions,"map-options":"","emit-value":"",modelValue:e.gatepasscreateitem.location,"onUpdate:modelValue":s[2]||(s[2]=o=>e.gatepasscreateitem.location=o)},{prepend:t(()=>[a(n,{name:"map",color:"black"})]),_:1},8,["options","modelValue"])]),r("div",ne,[a(u,{class:"fit",modelValue:e.gatepasscreateitem.date,"onUpdate:modelValue":s[4]||(s[4]=o=>e.gatepasscreateitem.date=o),label:"Date"},{prepend:t(()=>[a(n,{name:"event",class:"cursor-pointer",color:"black"},{default:t(()=>[a(O,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[a(L,{modelValue:e.gatepasscreateitem.date,"onUpdate:modelValue":s[3]||(s[3]=o=>e.gatepasscreateitem.date=o),mask:e.gatepassstore.dateFormat,"today-btn":""},{default:t(()=>[r("div",pe,[P(a(i,{label:"Close",color:"black",flat:""},null,512),[[M]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),r("div",me,[a(H,{rows:e.gatepasscreateitem.gate_pass_items,columns:e.createtablecolumn,"row-key":"item_number",separator:"vertical","auto-width":"",flat:"",bordered:""},{"top-right":t(()=>[a(i,{class:"q-mr-sm",color:"primary",icon:"add",onClick:s[5]||(s[5]=o=>e.gatepassstore.openAddGatepassDialog())},{default:t(()=>[a(V,{class:"bg-accent"},{default:t(()=>[b("Add Item")]),_:1})]),_:1}),a(i,{class:"q-mr-sm",color:"primary",icon:"remove"},{default:t(()=>[a(V,{class:"bg-accent"},{default:t(()=>[b("Remove Item")]),_:1})]),_:1}),a(i,{class:"q-mr-sm",color:"primary",icon:"restart_alt",onClick:s[6]||(s[6]=o=>e.gatepassstore.reset())},{default:t(()=>[a(V,{class:"bg-accent"},{default:t(()=>[b("Reset")]),_:1})]),_:1}),a(i,{class:"q-mr-sm",color:"primary",icon:"save"},{default:t(()=>[a(V,{class:"bg-accent"},{default:t(()=>[b("Save")]),_:1})]),_:1})]),_:1},8,["rows","columns"])]),r("div",de,[r("div",ie,[a(u,{modelValue:e.gatepasscreateitem.purpose,"onUpdate:modelValue":s[7]||(s[7]=o=>e.gatepasscreateitem.purpose=o),label:"Purpose"},{prepend:t(()=>[a(n,{name:"badge",color:"black"})]),_:1},8,["modelValue"])]),r("div",ue,[a(u,{modelValue:e.gatepasscreateitem.remarks,"onUpdate:modelValue":s[8]||(s[8]=o=>e.gatepasscreateitem.remarks=o),label:"Remarks"},{prepend:t(()=>[a(n,{name:"description",color:"black"})]),_:1},8,["modelValue"])])]),r("div",ce,[r("div",ge,[a(Q,{label:"Prepared By",options:e.preparedByOptions,"map-options":"","emit-value":"",modelValue:e.gatepasscreateitem.prepared_by,"onUpdate:modelValue":s[9]||(s[9]=o=>e.gatepasscreateitem.prepared_by=o)},{prepend:t(()=>[a(n,{name:"fact_check",color:"black"})]),_:1},8,["options","modelValue"])])]),a(l)]),_:1})}var ze=U(se,[["render",fe]]);export{ze as default};
