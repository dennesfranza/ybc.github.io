import{d as y,g as S,c as i,_ as V,M as q,C as d,G as u,H as o,f as a,J as t,Q as n,N as w,o as B,D as k,O as m,K as f}from"./index.834e57e7.js";import{Q as p}from"./QInput.3adc570b.js";import{Q as b}from"./QTooltip.7869642a.js";import{Q as C,e as I}from"./QTable.fc905379.js";import{Q}from"./QPage.2b43f395.js";import{u as $}from"./index.0dcd3dda.js";import{Q as g}from"./QCardSection.b35a0002.js";import{Q as R}from"./QSeparator.771723a9.js";import{Q as U}from"./QCardActions.6e08bd30.js";import{Q as W}from"./QSpinnerGears.6cc31471.js";import{Q as N}from"./QInnerLoading.3c8a4032.js";import{Q as A}from"./QCard.90c0a547.js";import{u as H,F as P}from"./FormHeader.35f5a2b6.js";import"./use-key-composition.c129f1c2.js";import"./use-dark.3a8cdb55.js";import"./use-id.8bff53a2.js";import"./uid.42677368.js";import"./use-form.534894e6.js";import"./format.2e604a71.js";import"./QList.9f1dfa09.js";import"./rtl.b51694b1.js";import"./QItem.e5da3e33.js";import"./QItemLabel.932b52ee.js";import"./QCheckbox.bc6af6e4.js";import"./axios.473f2f39.js";import"./use-quasar.34ea7664.js";const L=y({name:"withdrawalslip",setup(){const e=H(),l=e[S().type.name],r=$(),c=i(()=>r.withdrawalslipdetails);return{formheaders:e,formHeader:l,withdrawalstore:r,withdrawalslipdetails:c}},components:{FormHeaderVue:P}}),F={class:"row items-center"},G={class:"col q-pa-sm"},T={class:"col q-pa-sm"},z={class:"col q-pa-sm"},M={class:"q-pt-md"},E={class:"row q-pa-md"},J={class:"col q-pa-sm"},K={class:"col q-pa-sm"},O={class:"col q-pa-sm"};function j(e,l,r,c,v,_){const h=q("form-header-vue");return d(),u(Q,{class:"q-pa-sm"},{default:o(()=>[a(I,{modelValue:e.withdrawalstore.withdrawalslipdetailsdialog,"onUpdate:modelValue":l[7]||(l[7]=s=>e.withdrawalstore.withdrawalslipdetailsdialog=s),persistent:"",maximized:""},{default:o(()=>[a(A,null,{default:o(()=>[a(g,null,{default:o(()=>[a(h,{headers:e.formHeader.headers,name:e.formHeader.name},null,8,["headers","name"])]),_:1}),a(g,null,{default:o(()=>[t("div",F,[t("div",G,[a(p,{modelValue:e.withdrawalslipdetails.ws_number,"onUpdate:modelValue":l[0]||(l[0]=s=>e.withdrawalslipdetails.ws_number=s),label:"WS Number",readonly:""},{prepend:o(()=>[a(n,{name:"123",color:"black"})]),_:1},8,["modelValue"])]),t("div",T,[a(p,{modelValue:e.withdrawalslipdetails.location,"onUpdate:modelValue":l[1]||(l[1]=s=>e.withdrawalslipdetails.location=s),label:"Location",readonly:""},{prepend:o(()=>[a(n,{name:"map",color:"black"})]),_:1},8,["modelValue"])]),t("div",z,[a(p,{modelValue:e.withdrawalslipdetails.date,"onUpdate:modelValue":l[2]||(l[2]=s=>e.withdrawalslipdetails.date=s),label:"Date",readonly:""},{prepend:o(()=>[a(n,{name:"calendar_month",color:"black"})]),_:1},8,["modelValue"])])])]),_:1}),a(g,null,{default:o(()=>[t("div",M,[a(C,{columns:e.withdrawalstore.withdrawalslipdetailscolumns,rows:e.withdrawalstore.withdrawalslipdetailsitems,separator:"vertical","row-key":"id","auto-width":"",flat:"",bordered:""},null,8,["columns","rows"])])]),_:1}),a(g,null,{default:o(()=>[t("div",E,[t("div",J,[a(p,{modelValue:e.withdrawalslipdetails.requested_by,"onUpdate:modelValue":l[3]||(l[3]=s=>e.withdrawalslipdetails.requested_by=s),label:"Requested By",readonly:""},{prepend:o(()=>[a(n,{name:"fact_check",color:"black"})]),_:1},8,["modelValue"])]),t("div",K,[a(p,{modelValue:e.withdrawalslipdetails.noted_by,"onUpdate:modelValue":l[4]||(l[4]=s=>e.withdrawalslipdetails.noted_by=s),label:"Noted By",readonly:""},{prepend:o(()=>[a(n,{name:"fact_check",color:"black"})]),_:1},8,["modelValue"])]),t("div",O,[a(p,{modelValue:e.withdrawalslipdetails.issued_by,"onUpdate:modelValue":l[5]||(l[5]=s=>e.withdrawalslipdetails.issued_by=s),label:"Issued By",readonly:""},{prepend:o(()=>[a(n,{name:"fact_check",color:"black"})]),_:1},8,["modelValue"])])])]),_:1}),a(R),a(U,null,{default:o(()=>[a(w,{outline:"",label:"Close",color:"red",onClick:l[6]||(l[6]=s=>e.withdrawalstore.closeDetailsDialog())})]),_:1}),a(N,{showing:e.withdrawalstore.withdrawalslipdetailsloadingpage},{default:o(()=>[a(W,{size:"50px",color:"primary"})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}var X=V(L,[["render",j]]);const Y=y({name:"withdrawalslip",setup(){const e=$(),l=i(()=>e.tableindexrows),r=i(()=>e.tableindexcolumns),c=i({get:()=>e.selected,set:D=>e.selected=D}),v=i(()=>e.tableindexloading),_=i(()=>e.hasSelection),h=i(()=>e.withdrawalslipapprovalloading),s=i(()=>e.withdrawalslipdisapprovalloading);return B(()=>e.getAllItems()),{withdrawalstore:e,tableindexrows:l,tableindexcolumns:r,selected:c,tableindexloading:v,hasSelection:_,withdrawalslipapprovalloading:h,withdrawalslipdisapprovalloading:s}},methods:{onRowClick(e,l,r){console.log(l),this.withdrawalstore.openDetailsDialog(),this.withdrawalstore.retrieveWithdrawalItem(l.id)},onClickApproval(){let e={id:this.selected[0].id,is_approved:!0,status:"Approved"};this.withdrawalstore.approveRequest(e)},onClickDisapproval(){let e={id:this.selected[0].id,is_approved:!1,status:"Disapproved"};this.withdrawalstore.disapproveRequest(e)}},components:{WithdrawalDetailsPage:X}}),Z={class:"row items-center"},x={class:"col items-center"},ee={class:"row"},ae={key:0},le={key:1};function oe(e,l,r,c,v,_){const h=q("WithdrawalDetailsPage");return d(),u(Q,{class:"q-pa-sm"},{default:o(()=>[t("div",Z,[t("div",x,[t("div",ee,[e.$q.platform.is.desktop?(d(),k("h2",ae,"Withdrawal Slip")):m("",!0),e.$q.platform.is.mobile?(d(),k("h6",le,"Withdrawal Slip")):m("",!0)])])]),a(C,{title:"Withdrawal List",separator:"vertical",columns:e.tableindexcolumns,rows:e.tableindexrows,loading:e.tableindexloading,"row-key":"id",selection:"single",selected:e.selected,"onUpdate:selected":l[2]||(l[2]=s=>e.selected=s),"auto-width":"",flat:"",bordered:"",onRowClick:e.onRowClick},{"top-right":o(()=>[a(p,{class:"q-mr-sm",dense:"",debounce:"500",modelValue:e.indextablefilter,"onUpdate:modelValue":l[0]||(l[0]=s=>e.indextablefilter=s),placeholder:"Search",outlined:""},{append:o(()=>[a(n,{name:"search"})]),_:1},8,["modelValue"]),e.hasSelection?(d(),u(w,{key:0,class:"q-mr-sm",color:"primary",icon:"thumb_up",loading:e.withdrawalslipapprovalloading,onClick:e.onClickApproval},{default:o(()=>[a(b,{class:"bg-accent"},{default:o(()=>[f("Approve Request")]),_:1})]),_:1},8,["loading","onClick"])):m("",!0),e.hasSelection?(d(),u(w,{key:1,class:"q-mr-sm",color:"primary",icon:"thumb_down",loading:e.withdrawalslipdisapprovalloading,onClick:e.onClickDisapproval},{default:o(()=>[a(b,{class:"bg-accent"},{default:o(()=>[f("Disapprove Request")]),_:1})]),_:1},8,["loading","onClick"])):m("",!0),e.hasSelection?(d(),u(w,{key:2,class:"q-mr-sm",color:"primary",icon:"sentiment_satisfied"},{default:o(()=>[a(b,{class:"bg-accent"},{default:o(()=>[f("Noted By")]),_:1})]),_:1})):m("",!0),e.hasSelection?(d(),u(w,{key:3,class:"q-mr-sm",color:"primary",icon:"sentiment_very_satisfied"},{default:o(()=>[a(b,{class:"bg-accent"},{default:o(()=>[f("Issued By")]),_:1})]),_:1})):m("",!0),a(w,{class:"q-mr-sm",color:"primary",icon:"sync",onClick:l[1]||(l[1]=s=>e.withdrawalstore.getAllItems())},{default:o(()=>[a(b,{class:"bg-accent"},{default:o(()=>[f("Get Latest Data")]),_:1})]),_:1})]),_:1},8,["columns","rows","loading","selected","onRowClick"]),a(h)]),_:1})}var Be=V(Y,[["render",oe]]);export{Be as default};
