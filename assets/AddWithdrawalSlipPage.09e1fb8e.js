import{d as S,c as g,r as V,_,M as v,C as n,G as w,H as o,f as a,D as I,E as U,F as W,N as d,J as i,Q as m,K as u,O as D,g as F,x as A}from"./index.834e57e7.js";import{Q}from"./QInput.3adc570b.js";import{e as B,f as k,Q as N}from"./QTable.fc905379.js";import{Q as H,a as L}from"./QPopupProxy.3bf96fe9.js";import{Q as c}from"./QTooltip.7869642a.js";import{Q as q}from"./QPage.2b43f395.js";import{C as P}from"./ClosePopup.3ca82e04.js";import{u as R,F as O}from"./FormHeader.35f5a2b6.js";import{u as $}from"./index.0dcd3dda.js";import{u as T}from"./index.b13597b3.js";import{u as E}from"./index.87294496.js";import{u as j}from"./index.722b3f9a.js";import{Q as C}from"./QCardSection.b35a0002.js";import{Q as y}from"./QSeparator.771723a9.js";import{Q as G,a as J}from"./QItem.e5da3e33.js";import{Q as K}from"./QCardActions.6e08bd30.js";import{Q as M}from"./QCard.90c0a547.js";import{u as z}from"./index.e13618b0.js";import"./use-key-composition.c129f1c2.js";import"./use-dark.3a8cdb55.js";import"./use-id.8bff53a2.js";import"./uid.42677368.js";import"./use-form.534894e6.js";import"./QList.9f1dfa09.js";import"./rtl.b51694b1.js";import"./QItemLabel.932b52ee.js";import"./format.2e604a71.js";import"./QCheckbox.bc6af6e4.js";import"./use-cache.b0833c75.js";import"./date.9d662269.js";import"./use-quasar.34ea7664.js";import"./axios.473f2f39.js";const X=S({name:"addwithdrawalslip",setup(){const e=z(),t=$(),s=g(()=>t.createwithdrawalitems);return{consumablesstore:e,withdrawalstore:t,createwithdrawalitems:s,options:V([])}},methods:{filterFn(e,t,s){t(()=>{e===""?this.options=V([]):this.consumablesstore.searchConsumable(e)})},on(e){console.log(e),this.createwithdrawalitems.description=e;let t=this.consumablesstore.consumablesearchresults.find(s=>s.id===e);console.log(t.name),this.withdrawalstore.createwithdrawalitems.description_label=t.name}}}),Y=i("h6",null,"Withdrawal Slip",-1);function Z(e,t,s,h,f,b){const p=v("q-row");return n(),w(q,{class:"q-pa-sm"},{default:o(()=>[a(B,{modelValue:e.withdrawalstore.addwithdrawalslipitemdialog,"onUpdate:modelValue":t[2]||(t[2]=l=>e.withdrawalstore.addwithdrawalslipitemdialog=l),"backdrop-filter":"blur(4px)",persistent:""},{default:o(()=>[a(M,{style:{width:"700px","max-width":"80vw"}},{default:o(()=>[a(C,null,{default:o(()=>[Y]),_:1}),a(y),a(C,{class:"scroll"},{default:o(()=>[(n(!0),I(W,null,U(e.withdrawalstore.withdrawalslipdetailsinput,l=>(n(),w(p,{class:"q-gutter-xs",key:l.name},{default:o(()=>[l.type==="input"?(n(),w(Q,{key:0,filled:"",label:l.label,modelValue:e.withdrawalstore.createwithdrawalitems[l.name],"onUpdate:modelValue":r=>e.withdrawalstore.createwithdrawalitems[l.name]=r},{prepend:o(()=>[a(m,{name:l.icon,color:"black"},null,8,["name"])]),_:2},1032,["label","modelValue","onUpdate:modelValue"])):l.type==="select"?(n(),w(k,{key:1,label:l.label,modelValue:e.withdrawalstore.createwithdrawalitems[l.name],"onUpdate:modelValue":[r=>e.withdrawalstore.createwithdrawalitems[l.name]=r,e.on],"use-input":"","hide-selected":"",filled:"","fill-input":"","map-options":"","emit-value":"","input-debounce":"0",options:e.consumablesstore.consumableOptions,onFilter:e.filterFn},{"no-option":o(()=>[a(G,null,{default:o(()=>[a(J,{class:"text-grey"},{default:o(()=>[u(" No results ")]),_:1})]),_:1})]),prepend:o(()=>[a(m,{name:l.icon,color:"black"},null,8,["name"])]),_:2},1032,["label","modelValue","onUpdate:modelValue","options","onFilter"])):D("",!0)]),_:2},1024))),128))]),_:1}),a(y),a(K,{align:"left"},{default:o(()=>[a(d,{outline:"",label:"Close",color:"red",onClick:t[0]||(t[0]=l=>e.withdrawalstore.closeAddWithdrawalSlipDialog())}),a(d,{outline:"",label:"Add",color:"blue",onClick:t[1]||(t[1]=l=>e.withdrawalstore.addWithdrawalItem())})]),_:1})]),_:1})]),_:1},8,["modelValue","backdrop-filter"])]),_:1})}var x=_(X,[["render",Z]]);const ee=S({name:"withdrawalslip",setup(){const e=R(),t=e[F().type.name],s=$(),h=T(),f=E(),b=j(),p=g(()=>s.createwithdrawalitem),l=g(()=>s.postwithdrawalslipitemloading);return{formheaders:e,formHeader:t,withdrawalstore:s,locationstore:h,loginstore:f,userstore:b,createwithdrawalitem:p,postwithdrawalslipitemloading:l,selected:V([])}},methods:{onClickRemoveItem(){this.withdrawalstore.removeWithdrawalItem(this.selected[0]),this.selected=[]}},components:{FormHeaderVue:O,AddWithdrawalSlipDialog:x}}),ae={class:"row items-center"},te={class:"col q-pa-sm"},oe={class:"col q-pa-sm"},le={class:"col q-pa-sm"},re={class:"row items-center justify-end"},se={class:"q-pt-md"},ie={class:"row items-center"},de={class:"col q-pa-sm"};function ne(e,t,s,h,f,b){const p=v("form-header-vue"),l=v("AddWithdrawalSlipDialog");return n(),w(q,{class:"q-pa-sm"},{default:o(()=>[a(p,{headers:e.formHeader.headers,name:`Create ${e.formHeader.name}`},null,8,["headers","name"]),i("div",ae,[i("div",te,[a(Q,{modelValue:e.createwithdrawalitem.ws_number,"onUpdate:modelValue":t[0]||(t[0]=r=>e.createwithdrawalitem.ws_number=r),label:"WS Number"},{prepend:o(()=>[a(m,{name:"123",color:"black"})]),_:1},8,["modelValue"])]),i("div",oe,[a(k,{label:"Location",options:e.locationstore.locationOptions,modelValue:e.createwithdrawalitem.location,"onUpdate:modelValue":t[1]||(t[1]=r=>e.createwithdrawalitem.location=r),"map-options":"","emit-value":""},{prepend:o(()=>[a(m,{name:"map",color:"black"})]),_:1},8,["options","modelValue"])]),i("div",le,[a(Q,{class:"fit",modelValue:e.createwithdrawalitem.date,"onUpdate:modelValue":t[3]||(t[3]=r=>e.createwithdrawalitem.date=r),label:"Date"},{prepend:o(()=>[a(m,{name:"event",class:"cursor-pointer"},{default:o(()=>[a(H,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:o(()=>[a(L,{modelValue:e.createwithdrawalitem.date,"onUpdate:modelValue":t[2]||(t[2]=r=>e.createwithdrawalitem.date=r),mask:e.withdrawalstore.dateFormat,"today-btn":""},{default:o(()=>[i("div",re,[A(a(d,{label:"Close",color:"black",flat:""},null,512),[[P]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),i("div",se,[a(N,{title:"Items List",columns:e.withdrawalstore.tablecreatecolumns,rows:e.withdrawalstore.createwithdrawalitem.withdrawal_slip_items,selection:"single",selected:e.selected,"onUpdate:selected":t[6]||(t[6]=r=>e.selected=r),"row-key":"description",separator:"vertical","auto-width":"",flat:"",bordered:""},{"top-right":o(()=>[a(d,{class:"q-mr-sm",color:"primary",disable:e.loading,icon:"add",onClick:t[4]||(t[4]=r=>e.withdrawalstore.openAddWithdrawalSlipDialog())},{default:o(()=>[a(c,{class:"bg-accent"},{default:o(()=>[u("Add Item")]),_:1})]),_:1},8,["disable"]),a(d,{class:"q-mr-sm",color:"primary",disable:e.selected.length==0,icon:"remove",onClick:e.onClickRemoveItem},{default:o(()=>[a(c,{class:"bg-accent"},{default:o(()=>[u("Remove Item")]),_:1})]),_:1},8,["disable","onClick"]),a(d,{class:"q-mr-sm",color:"primary",disable:e.loading,icon:"restart_alt"},{default:o(()=>[a(c,{class:"bg-accent"},{default:o(()=>[u("Reset")]),_:1})]),_:1},8,["disable"]),a(d,{class:"q-mr-sm",color:"primary",icon:"save",disable:e.createwithdrawalitem.withdrawal_slip_items.length===0,loading:e.postwithdrawalslipitemloading,onClick:t[5]||(t[5]=r=>e.withdrawalstore.postWithdrawalItem(e.createwithdrawalitem))},{default:o(()=>[a(c,{class:"bg-accent"},{default:o(()=>[u("Save")]),_:1})]),_:1},8,["disable","loading"])]),_:1},8,["columns","rows","selected"])]),i("div",ie,[i("div",de,[a(k,{label:"Requested By",options:e.loginstore.preparedByOptions,"map-options":"","emit-value":"",modelValue:e.createwithdrawalitem.requested_by,"onUpdate:modelValue":t[7]||(t[7]=r=>e.createwithdrawalitem.requested_by=r)},{prepend:o(()=>[a(m,{name:"fact_check",color:"black"})]),_:1},8,["options","modelValue"])])]),a(l)]),_:1})}var Te=_(ee,[["render",ne]]);export{Te as default};
