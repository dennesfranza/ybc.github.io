import{d as U,c as q,r as R,_ as S,M as g,C as d,G as c,H as s,f as t,D as A,E as B,F as h,N as n,J as i,Q as u,K as f,O,g as H,x as Q}from"./index.834e57e7.js";import{Q as V}from"./QInput.3adc570b.js";import{e as L,f as I,Q as P}from"./QTable.fc905379.js";import{Q as k,a as y}from"./QPopupProxy.3bf96fe9.js";import{Q as b}from"./QTooltip.7869642a.js";import{Q as D}from"./QPage.2b43f395.js";import{C}from"./ClosePopup.3ca82e04.js";import{u as M,F as T}from"./FormHeader.35f5a2b6.js";import{u as j}from"./index.b13597b3.js";import{u as E}from"./index.722b3f9a.js";import{u as F}from"./index.bc0a6893.js";import{Q as $}from"./QCardSection.b35a0002.js";import{Q as w}from"./QSeparator.771723a9.js";import{Q as z,a as G}from"./QItem.e5da3e33.js";import{Q as J}from"./QCardActions.6e08bd30.js";import{Q as K}from"./QCard.90c0a547.js";import{u as W}from"./index.e13618b0.js";import{u as X}from"./index.87294496.js";import"./use-key-composition.c129f1c2.js";import"./use-dark.3a8cdb55.js";import"./use-id.8bff53a2.js";import"./uid.42677368.js";import"./use-form.534894e6.js";import"./QList.9f1dfa09.js";import"./rtl.b51694b1.js";import"./QItemLabel.932b52ee.js";import"./format.2e604a71.js";import"./QCheckbox.bc6af6e4.js";import"./use-cache.b0833c75.js";import"./date.9d662269.js";import"./use-quasar.34ea7664.js";import"./axios.473f2f39.js";const Y=U({name:"addrequest",setup(){const e=F(),o=W(),l=q(()=>e.requisition_request_item);return{requeststore:e,requisition_request_item:l,consumablesstore:o,options:R([])}},methods:{filterFn(e,o,l){o(()=>{e===""?this.options=R([]):this.consumablesstore.searchConsumable(e)})},updateModelValue(e){console.log(e),this.requisition_request_item.description=e;let o=this.consumablesstore.consumablesearchresults.find(l=>l.id===e);console.log(o.name),this.requeststore.requisition_request_item.description_label=o.name}}}),Z=i("h6",null,"Requisition Slip",-1);function x(e,o,l,_,m,v){const p=g("q-row");return d(),c(D,{class:"q-pa-sm"},{default:s(()=>[t(L,{modelValue:e.requeststore.requisitionrequestdialog,"onUpdate:modelValue":o[2]||(o[2]=a=>e.requeststore.requisitionrequestdialog=a),persistent:"",maximized:""},{default:s(()=>[t(K,null,{default:s(()=>[t($,null,{default:s(()=>[Z]),_:1}),t(w),t($,{class:"scroll"},{default:s(()=>[(d(!0),A(h,null,B(e.requeststore.requestdetailsinput,a=>(d(),c(p,{class:"q-gutter-xs",key:a.name},{default:s(()=>[a.type==="input"?(d(),c(V,{key:0,filled:"",label:a.label,modelValue:e.requisition_request_item[a.name],"onUpdate:modelValue":r=>e.requisition_request_item[a.name]=r},{prepend:s(()=>[t(u,{name:a.icon,color:"black"},null,8,["name"])]),_:2},1032,["label","modelValue","onUpdate:modelValue"])):a.type==="select"?(d(),c(I,{key:1,label:a.label,modelValue:e.requisition_request_item[a.name],"onUpdate:modelValue":[r=>e.requisition_request_item[a.name]=r,e.updateModelValue],"use-input":"","hide-selected":"",filled:"","fill-input":"","map-options":"","emit-value":"","input-debounce":"0",options:e.consumablesstore.consumableOptions,onFilter:e.filterFn},{"no-option":s(()=>[t(z,null,{default:s(()=>[t(G,{class:"text-grey"},{default:s(()=>[f(" No results ")]),_:1})]),_:1})]),prepend:s(()=>[t(u,{name:a.icon,color:"black"},null,8,["name"])]),_:2},1032,["label","modelValue","onUpdate:modelValue","options","onFilter"])):O("",!0)]),_:2},1024))),128))]),_:1}),t(w),t(J,{align:"left"},{default:s(()=>[t(n,{outline:"",label:"Close",color:"red",onClick:o[0]||(o[0]=a=>e.requeststore.closeAddRequisitionDialog())}),t(n,{outline:"",label:"Add",color:"blue",onClick:o[1]||(o[1]=a=>e.requeststore.addRequestItem())})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var ee=S(Y,[["render",x]]);const oe=U({name:"requisitionslip",setup(){const e=M(),o=j(),l=E(),_=X(),m=F(),v=e[H().type.name],p=q(()=>m.createrequisitionrequest),a=q(()=>m.dateNeeded),r=q(()=>_.preparedByOptions),N=q(()=>l.approverOptions);return{formheaders:e,formHeader:v,locationstore:o,userstore:l,requeststore:m,requisitionRequestItem:p,dateNeeded:a,selected:R([]),preparedByOptions:r,approverOptions:N}},components:{FormHeaderVue:T,AddRequisitionDialog:ee}}),te={class:"row items-center"},se={class:"col q-pa-sm"},re={class:"col q-pa-sm"},ae={class:"col q-pa-sm"},ie={class:"row items-center justify-end"},le={class:"col q-pa-sm"},ne={class:"row items-center justify-end"},ue={class:"q-pt-md"},de={class:"row items-center"},me={class:"col q-pa-sm"};function pe(e,o,l,_,m,v){const p=g("form-header-vue"),a=g("AddRequisitionDialog");return d(),c(D,{class:"q-pa-sm"},{default:s(()=>[t(p,{headers:e.formHeader.headers,name:`Create ${e.formHeader.name}`},null,8,["headers","name"]),i("div",te,[i("div",se,[t(V,{modelValue:e.requisitionRequestItem.rs_number,"onUpdate:modelValue":o[0]||(o[0]=r=>e.requisitionRequestItem.rs_number=r),label:"RS Number"},{prepend:s(()=>[t(u,{name:"123",color:"black"})]),_:1},8,["modelValue"])]),i("div",re,[t(I,{label:"Location",options:e.locationstore.locationOptions,"map-options":"","emit-value":"",modelValue:e.requisitionRequestItem.location,"onUpdate:modelValue":o[1]||(o[1]=r=>e.requisitionRequestItem.location=r)},{prepend:s(()=>[t(u,{name:"map",color:"black"})]),_:1},8,["options","modelValue"])]),i("div",ae,[t(V,{modelValue:e.requisitionRequestItem.date_requested,"onUpdate:modelValue":o[3]||(o[3]=r=>e.requisitionRequestItem.date_requested=r),label:"Date Requested"},{prepend:s(()=>[t(u,{name:"event",class:"cursor-pointer",color:"black"},{default:s(()=>[t(k,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[t(y,{modelValue:e.requisitionRequestItem.date_requested,"onUpdate:modelValue":o[2]||(o[2]=r=>e.requisitionRequestItem.date_requested=r),mask:e.requeststore.dateFormat,"today-btn":""},{default:s(()=>[i("div",ie,[Q(t(n,{label:"Close",color:"primary",flat:""},null,512),[[C]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),i("div",le,[t(V,{class:"fit",modelValue:e.requisitionRequestItem.date_needed,"onUpdate:modelValue":o[5]||(o[5]=r=>e.requisitionRequestItem.date_needed=r),label:"Date Needed"},{prepend:s(()=>[t(u,{name:"event",class:"cursor-pointer",color:"black"},{default:s(()=>[t(k,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[t(y,{modelValue:e.requisitionRequestItem.date_needed,"onUpdate:modelValue":o[4]||(o[4]=r=>e.requisitionRequestItem.date_needed=r),mask:e.requeststore.dateFormat,"today-btn":""},{default:s(()=>[i("div",ne,[Q(t(n,{label:"Close",color:"primary",flat:""},null,512),[[C]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),i("div",ue,[t(P,{title:"Items List",rows:e.requeststore.createrequisitionrequest.requisition_request_items,columns:e.requeststore.tablecreatecolumns,selection:"single",selected:e.selected,"onUpdate:selected":o[10]||(o[10]=r=>e.selected=r),"row-key":"item_number",separator:"vertical","auto-width":"",flat:"",bordered:""},{"top-right":s(()=>[t(n,{class:"q-mr-sm",color:"primary",icon:"add",onClick:o[6]||(o[6]=r=>e.requeststore.openAddRequisitionDialog())},{default:s(()=>[t(b,{class:"bg-accent"},{default:s(()=>[f("Add Item")]),_:1})]),_:1}),t(n,{class:"q-mr-sm",color:"primary",icon:"remove",onClick:o[7]||(o[7]=r=>e.requeststore.removeRequesItem(e.selected[0]))},{default:s(()=>[t(b,{class:"bg-accent"},{default:s(()=>[f("Remove Item")]),_:1})]),_:1}),t(n,{class:"q-mr-sm",color:"primary",icon:"restart_alt",onClick:o[8]||(o[8]=r=>e.requeststore.resetCreateItem())},{default:s(()=>[t(b,{class:"bg-accent"},{default:s(()=>[f("Reset")]),_:1})]),_:1}),t(n,{class:"q-mr-sm",color:"primary",loading:e.requeststore.postrequisitionrequestitemloading,icon:"save",onClick:o[9]||(o[9]=r=>e.requeststore.postItem(e.requisitionRequestItem))},{default:s(()=>[t(b,{class:"bg-accent"},{default:s(()=>[f("Save")]),_:1})]),_:1},8,["loading"])]),_:1},8,["rows","columns","selected"])]),i("div",de,[i("div",me,[t(I,{label:"Requested By",options:e.preparedByOptions,"map-options":"","emit-value":"",modelValue:e.requisitionRequestItem.requested_by,"onUpdate:modelValue":o[11]||(o[11]=r=>e.requisitionRequestItem.requested_by=r)},{prepend:s(()=>[t(u,{name:"fact_check",color:"black"})]),_:1},8,["options","modelValue"])])]),t(a)]),_:1})}var ze=S(oe,[["render",pe]]);export{ze as default};
