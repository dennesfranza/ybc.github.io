import{Q}from"./QInnerLoading.3c8a4032.js";import{d as h,g as H,c as r,_ as C,M as _,C as d,G as p,H as t,f as o,J as n,Q as u,N as q,D as I,E as z,F as G,O as g,r as T,K as b,o as M}from"./index.834e57e7.js";import{Q as m}from"./QInput.3adc570b.js";import{Q as v}from"./QTooltip.7869642a.js";import{Q as S,e as E}from"./QTable.fc905379.js";import{Q as $}from"./QPage.2b43f395.js";import{u as R}from"./index.bc0a6893.js";import{u as j}from"./index.87294496.js";import{Q as k}from"./QCardSection.b35a0002.js";import{Q as J}from"./QSeparator.771723a9.js";import{Q as U}from"./QCardActions.6e08bd30.js";import{Q as N}from"./QSpinnerGears.6cc31471.js";import{Q as A}from"./QCard.90c0a547.js";import{u as B,F as L}from"./FormHeader.35f5a2b6.js";import"./use-dark.3a8cdb55.js";import"./format.2e604a71.js";import"./use-id.8bff53a2.js";import"./uid.42677368.js";import"./use-key-composition.c129f1c2.js";import"./use-form.534894e6.js";import"./QList.9f1dfa09.js";import"./rtl.b51694b1.js";import"./QItem.e5da3e33.js";import"./QItemLabel.932b52ee.js";import"./QCheckbox.bc6af6e4.js";import"./axios.473f2f39.js";import"./use-quasar.34ea7664.js";const K=h({name:"requisitionslip",setup(){const e=B(),i=e[H().type.name],a=R(),f=r(()=>a.editable);return{formheaders:e,formHeader:i,requeststore:a,editable:f}},components:{FormHeaderVue:L}}),O={class:"row items-center"},W={class:"col q-pa-sm"},X={class:"col q-pa-sm"},Y={class:"col q-pa-sm"},Z={class:"col q-pa-sm"},x={class:"q-pt-md"},ee={class:"row q-pa-md"},oe={class:"col q-pa-sm"},ie={class:"col q-pa-sm"};function te(e,i,a,f,y,V){const c=_("form-header-vue");return d(),p($,{class:"q-pa-sm"},{default:t(()=>[o(E,{modelValue:e.requeststore.requisitiondetailspagedialog,"onUpdate:modelValue":i[7]||(i[7]=s=>e.requeststore.requisitiondetailspagedialog=s),persistent:"",maximized:""},{default:t(()=>[o(A,null,{default:t(()=>[o(k,null,{default:t(()=>[o(c,{headers:e.formHeader.headers,name:e.formHeader.name},null,8,["headers","name"])]),_:1}),o(k,null,{default:t(()=>[n("div",O,[n("div",W,[o(m,{modelValue:e.requeststore.requisitiondetails.rs_number,"onUpdate:modelValue":i[0]||(i[0]=s=>e.requeststore.requisitiondetails.rs_number=s),label:"RS Number",readonly:e.editable},{prepend:t(()=>[o(u,{name:"123",color:"black"})]),_:1},8,["modelValue","readonly"])]),n("div",X,[o(m,{modelValue:e.requeststore.requisitiondetails.date_requested,"onUpdate:modelValue":i[1]||(i[1]=s=>e.requeststore.requisitiondetails.date_requested=s),label:"Date Requested",readonly:e.editable},{prepend:t(()=>[o(u,{name:"calendar_month",color:"black"})]),_:1},8,["modelValue","readonly"])]),n("div",Y,[o(m,{class:"fit",modelValue:e.requeststore.requisitiondetails.date_needed,"onUpdate:modelValue":i[2]||(i[2]=s=>e.requeststore.requisitiondetails.date_needed=s),label:"Date Needed",readonly:e.editable},{prepend:t(()=>[o(u,{name:"calendar_month",color:"black"})]),_:1},8,["modelValue","readonly"])]),n("div",Z,[o(m,{class:"fit",modelValue:e.requeststore.requisitiondetails.location,"onUpdate:modelValue":i[3]||(i[3]=s=>e.requeststore.requisitiondetails.location=s),label:"Location",readonly:e.editable},{prepend:t(()=>[o(u,{name:"map",color:"black"})]),_:1},8,["modelValue","readonly"])])])]),_:1}),o(k,null,{default:t(()=>[n("div",x,[o(S,{rows:e.requeststore.requisitiondetailsitems,columns:e.requeststore.requisitiondetailscolumns,"row-key":"item_number",separator:"vertical","auto-width":"",flat:"",bordered:""},null,8,["rows","columns"])])]),_:1}),o(k,null,{default:t(()=>[n("div",ee,[n("div",oe,[o(m,{modelValue:e.requeststore.requisitiondetails.requested_by,"onUpdate:modelValue":i[4]||(i[4]=s=>e.requeststore.requisitiondetails.requested_by=s),label:"Requested By",readonly:e.editable},{prepend:t(()=>[o(u,{name:"fact_check",color:"black"})]),_:1},8,["modelValue","readonly"])]),n("div",ie,[o(m,{modelValue:e.requeststore.requisitiondetails.approved_by,"onUpdate:modelValue":i[5]||(i[5]=s=>e.requeststore.requisitiondetails.approved_by=s),label:"Approved By",readonly:e.editable},{prepend:t(()=>[o(u,{name:"fact_check",color:"black"})]),_:1},8,["modelValue","readonly"])])])]),_:1}),o(J),o(U,null,{default:t(()=>[o(q,{outline:"",label:"Close",color:"red",onClick:i[6]||(i[6]=s=>e.requeststore.closeRequisitionDetailsDialog())})]),_:1}),o(Q,{showing:e.requeststore.requisitiondetailsloadingpage},{default:t(()=>[o(N,{size:"50px",color:"primary"})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}var se=C(K,[["render",te]]);const le=h({name:"editrequisition",props:{id:{type:String,required:!0}},setup(e){const i=R(),a=r(()=>i.requisitionedit);return{requeststore:i,requisitionedit:a}}});function ae(e,i,a,f,y,V){const c=_("q-row");return d(),p($,{class:"q-pa-sm"},{default:t(()=>[o(E,{modelValue:e.requeststore.requisitionaddeditdialog,"onUpdate:modelValue":i[1]||(i[1]=s=>e.requeststore.requisitionaddeditdialog=s)},{default:t(()=>[o(A,{style:{width:"450px",height:"360px"}},{default:t(()=>[o(k,{class:"scroll"},{default:t(()=>[(d(!0),I(G,null,z(e.requeststore.requestdetailsinput,s=>(d(),p(c,{class:"q-gutter-xs",key:s.name},{default:t(()=>[s.type==="input"?(d(),p(m,{key:0,filled:"",label:s.label,modelValue:e.requisitionedit.requisition_request_items[e.id][s.name],"onUpdate:modelValue":l=>e.requisitionedit.requisition_request_items[e.id][s.name]=l},{prepend:t(()=>[o(u,{name:s.icon,color:"black"},null,8,["name"])]),_:2},1032,["label","modelValue","onUpdate:modelValue"])):g("",!0)]),_:2},1024))),128))]),_:1}),o(U,null,{default:t(()=>[o(q,{outline:"",label:"Close",color:"red",onClick:i[0]||(i[0]=s=>e.requeststore.closeAddEditDialog())})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var re=C(le,[["render",ae]]);const ne=h({name:"requisitionslip",setup(){const e=B(),i=e[H().type.name],a=R(),f=r(()=>a.editable),y=r(()=>a.requisitionedit),V=r(()=>a.requisitioneditdialog),c=r(()=>a.requisitiondetailsitems),s=r(()=>a.requisitiondetailscolumns),l=r({get:()=>a.itemselected,set:D=>a.itemselected=D}),w=r(()=>a.hasEditItemSelection);return{formheaders:e,formHeader:i,requeststore:a,editable:f,requisitionedit:y,requisitioneditdialog:V,requisitiondetailsitems:c,requisitiondetailscolumns:s,itemselected:l,hasEditItemSelection:w,id:T("")}},methods:{onEditClick(){let e=this.itemselected[0].id,i=this.requisitionedit.requisition_request_items.findIndex(a=>a.id===e);this.id=i,this.requeststore.openAddEditDialog()},onRemoveClick(){this.requeststore.removeRequisitionItem(this.itemselected[0].id)},onAddClick(){}},components:{FormHeaderVue:L,EditRequisitionItemsDialog:re}}),de={class:"row items-center"},ue={class:"col q-pa-sm"},me={class:"col q-pa-sm"},pe={class:"col q-pa-sm"},qe={class:"col q-pa-sm"},ce={class:"q-pt-md"};function fe(e,i,a,f,y,V){const c=_("form-header-vue"),s=_("EditRequisitionItemsDialog");return d(),p($,{class:"q-pa-sm"},{default:t(()=>[o(E,{modelValue:e.requisitioneditdialog,"onUpdate:modelValue":i[7]||(i[7]=l=>e.requisitioneditdialog=l),persistent:"",maximized:""},{default:t(()=>[o(A,null,{default:t(()=>[o(k,null,{default:t(()=>[o(c,{headers:e.formHeader.headers,name:e.formHeader.name},null,8,["headers","name"])]),_:1}),o(k,null,{default:t(()=>[n("div",de,[n("div",ue,[o(m,{modelValue:e.requisitionedit.rs_number,"onUpdate:modelValue":i[0]||(i[0]=l=>e.requisitionedit.rs_number=l),label:"RS Number",readonly:""},{prepend:t(()=>[o(u,{name:"123",color:"black"})]),_:1},8,["modelValue"])]),n("div",me,[o(m,{modelValue:e.requisitionedit.date_requested,"onUpdate:modelValue":i[1]||(i[1]=l=>e.requisitionedit.date_requested=l),label:"Date Requested",readonly:""},{prepend:t(()=>[o(u,{name:"calendar_month",color:"black"})]),_:1},8,["modelValue"])]),n("div",pe,[o(m,{class:"fit",modelValue:e.requisitionedit.date_needed,"onUpdate:modelValue":i[2]||(i[2]=l=>e.requisitionedit.date_needed=l),label:"Date Needed",readonly:""},{prepend:t(()=>[o(u,{name:"calendar_month",color:"black"})]),_:1},8,["modelValue"])]),n("div",qe,[o(m,{class:"fit",modelValue:e.requisitionedit.location_label,"onUpdate:modelValue":i[3]||(i[3]=l=>e.requisitionedit.location_label=l),label:"Location",readonly:""},{prepend:t(()=>[o(u,{name:"map",color:"black"})]),_:1},8,["modelValue"])])])]),_:1}),o(k,null,{default:t(()=>[n("div",ce,[o(S,{title:"Requisition Items","row-key":"id",selection:"single",rows:e.requeststore.requisitionedit.requisition_request_items,columns:e.requeststore.requisitioneditcolumns,separator:"vertical","auto-width":"",flat:"",bordered:"",selected:e.itemselected,"onUpdate:selected":i[4]||(i[4]=l=>e.itemselected=l)},{"top-right":t(()=>[o(q,{class:"q-mr-sm",color:"primary",icon:"add",onClick:e.onAddClick},{default:t(()=>[o(v,{class:"bg-accent"},{default:t(()=>[b("Add Item")]),_:1})]),_:1},8,["onClick"]),e.hasEditItemSelection?(d(),p(q,{key:0,class:"q-mr-sm",color:"primary",icon:"edit",onClick:e.onEditClick},{default:t(()=>[o(v,{class:"bg-accent"},{default:t(()=>[b("Edit Item")]),_:1})]),_:1},8,["onClick"])):g("",!0),e.hasEditItemSelection?(d(),p(q,{key:1,class:"q-mr-sm",color:"primary",icon:"remove",loading:e.requeststore.removerequisitionitemloading,onClick:e.onRemoveClick},{default:t(()=>[o(v,{class:"bg-accent"},{default:t(()=>[b("Remove Item")]),_:1})]),_:1},8,["loading","onClick"])):g("",!0)]),_:1},8,["rows","columns","selected"])])]),_:1}),o(U,null,{default:t(()=>[o(q,{outline:"",label:"Close",color:"red",onClick:i[5]||(i[5]=l=>e.requeststore.closeRequisitionDetailsDialog())}),o(q,{outline:"",label:"Update",color:"primary",loading:e.requeststore.updaterequisitioneditloading,onClick:i[6]||(i[6]=l=>e.requeststore.updateRequisitionRequest())},null,8,["loading"])]),_:1}),o(Q,{showing:e.requeststore.requisitiondetailsloadingpage},{default:t(()=>[o(N,{size:"50px",color:"primary"})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"]),o(s,{id:e.id},null,8,["id"])]),_:1})}var ge=C(ne,[["render",fe]]);const be=h({name:"requisitionslip",setup(){const e=R(),i=j(),a=r(()=>e.tableindexcolumns),f=r(()=>e.tableindexrows),y=r(()=>e.listallitemstableloading),V=r(()=>e.postrequisitionrequestitemloading),c=r(()=>e.openrequisitionrequestdialog),s=r({get:()=>e.selected,set:P=>e.selected=P}),l=r(()=>e.hasSelection),w=r(()=>e.requisitionapprovalloading),D=r(()=>e.requisitiondisapprovalloading),F=r(()=>e.isApproved);return M(()=>e.getAllItems()),{requeststore:e,loginstore:i,tableindexcolumns:a,tableindexrows:f,listallitemstableloading:y,postrequisitionrequestitemloading:V,openrequisitionrequestdialog:c,selected:s,hasSelection:l,requisitionapprovalloading:w,requisitiondisapprovalloading:D,isApproved:F,requisitionid:null}},methods:{onRowClick(e,i,a){this.requeststore.openRequisitionDetailsDialog(),this.requisitionid=i.id,this.requeststore.retrieveRequisitionItem(i.id)},onClickApproval(){let e={id:this.selected[0].id,is_approved:!0,status:"Approved"};this.requeststore.approveRequest(e)},onClickDisapproval(){let e={id:this.selected[0].id,is_approved:!1,status:"Disapproved"};this.requeststore.approveRequest(e)},removeItem(){this.requeststore.removeRequesitionRequestItem(this.selected[0].id)}},components:{RequisitionDetailsPage:se,EditRequisitionDialog:ge}}),ve={class:"row items-center"},ke={class:"col items-center"},ye={class:"row"},Ve={key:0},_e={key:1};function he(e,i,a,f,y,V){const c=_("RequisitionDetailsPage"),s=_("EditRequisitionDialog");return d(),p($,{class:"q-pa-sm"},{default:t(()=>[n("div",ve,[n("div",ke,[n("div",ye,[e.$q.platform.is.desktop?(d(),I("h2",Ve,"Requisition Slip")):g("",!0),e.$q.platform.is.mobile?(d(),I("h6",_e,"Requisition Slip")):g("",!0)])])]),o(S,{title:"Requisition List","row-key":"id",selection:"single",columns:e.tableindexcolumns,rows:e.tableindexrows,separator:"vertical",loading:e.listallitemstableloading,"auto-width":"",flat:"",bordered:"",selected:e.selected,"onUpdate:selected":i[3]||(i[3]=l=>e.selected=l),onRowClick:e.onRowClick},{loading:t(()=>[o(Q,{showing:"",color:"primary"})]),"top-right":t(()=>[o(m,{class:"q-mr-sm",dense:"",debounce:"500",modelValue:e.indextablefilter,"onUpdate:modelValue":i[0]||(i[0]=l=>e.indextablefilter=l),placeholder:"Search",outlined:""},{append:t(()=>[o(u,{name:"search"})]),_:1},8,["modelValue"]),e.hasSelection?(d(),p(q,{key:0,class:"q-mr-sm",color:"primary",icon:"remove",loading:e.requeststore.deleterequisitionitemloading,onClick:e.removeItem},{default:t(()=>[o(v,{class:"bg-accent"},{default:t(()=>[b("Remove Item")]),_:1})]),_:1},8,["loading","onClick"])):g("",!0),e.hasSelection&&e.isApproved===!1?(d(),p(q,{key:1,class:"q-mr-sm",color:"primary",icon:"thumb_up",loading:e.requisitionapprovalloading,onClick:e.onClickApproval},{default:t(()=>[o(v,{class:"bg-accent"},{default:t(()=>[b("Approve Request")]),_:1})]),_:1},8,["loading","onClick"])):g("",!0),e.hasSelection&&e.isApproved===!1?(d(),p(q,{key:2,class:"q-mr-sm",color:"primary",icon:"thumb_down",loading:e.requisitiondisapprovalloading,onClick:e.onClickDisapproval},{default:t(()=>[o(v,{class:"bg-accent"},{default:t(()=>[b("Disapprove Request")]),_:1})]),_:1},8,["loading","onClick"])):g("",!0),e.hasSelection&&e.isApproved===!1?(d(),p(q,{key:3,class:"q-mr-sm",color:"primary",icon:"edit",onClick:i[1]||(i[1]=l=>e.requeststore.openEditDialog())},{default:t(()=>[o(v,{class:"bg-accent"},{default:t(()=>[b("Edit")]),_:1})]),_:1})):g("",!0),o(q,{class:"q-mr-sm",color:"primary",icon:"sync",onClick:i[2]||(i[2]=l=>e.requeststore.getAllItems())},{default:t(()=>[o(v,{class:"bg-accent"},{default:t(()=>[b("Get Latest Data")]),_:1})]),_:1})]),_:1},8,["columns","rows","loading","selected","onRowClick"]),o(c),o(s)]),_:1})}var Ye=C(be,[["render",he]]);export{Ye as default};
