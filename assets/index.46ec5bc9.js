import{af as r}from"./index.5df2bc92.js";import{a as i}from"./axios.a63e1254.js";var u={login:{id:null,username:null,name:null,email:null,is_staff:null,is_approver:null,is_superuser:null,token:null,refresh_token:null},credentials:{username:null,password:null},isloggedin:!1,loginloadingpage:!1};const o=(n,l)=>{i.post("api/user/login/",l).then(e=>{e.status===200&&(n.isloggedin=!0,n.login.id=e.data.user.id,n.login.username=e.data.user.username,n.login.name=e.data.user.name,n.login.email=e.data.user.email,n.login.is_staff=e.data.user.is_staff,n.login.is_approver=e.data.user.is_approver,n.login.is_superuser=e.data.user.is_superuser,n.login.token=e.data.token,n.login.refresh_token=e.data.refresh_token,n.credentials.username=null,n.credentials.password=null,n.router.push("/Dashboard"))})},a=n=>{n.login={id:null,username:null,name:null,email:null,is_staff:null,is_approver:null,is_superuser:null,token:null,refresh_token:null},n.router.push("Login")},s=n=>{let l={refresh:n.login.refresh_token};i.post("api/user/refresh-token/",l).then(e=>{e.status===200&&(n.login.token=e.data.token)})},d=r("login",{state:()=>u,getters:{preparedByOptions:n=>[{label:n.login.name,value:n.login.id}],currentUserId:n=>n.login.id},actions:{userLogin(){o(this,this.credentials)},userLogout(){a(this)},userRefreshToken(){s(this)}},persist:!0});export{d as u};
