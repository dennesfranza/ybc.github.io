import{d as q,c as g,r as y,_ as U,M as v,C as d,G as b,H as t,f as a,K as i,L as $,D as G,E as F,F as I,N as u,J as r,Q as n,O as w,g as B,x as P}from"./index.5df2bc92.js";import{Q as c}from"./QInput.690d3d89.js";import{e as N,f as Q,Q as H}from"./QTable.2ac18fab.js";import{Q as O,a as L}from"./QPopupProxy.2164c88e.js";import{Q as V}from"./QTooltip.a007546b.js";import{Q as A}from"./QPage.42c487b8.js";import{C as M}from"./ClosePopup.a118c19d.js";import{u as R,F as T}from"./FormHeader.f2aa43c0.js";import{u as E}from"./index.97fe6100.js";import{u as j}from"./index.fc48e11a.js";import{u as D}from"./index.abffffe5.js";import{u as J}from"./index.46ec5bc9.js";import{Q as C}from"./QCardSection.b73f131f.js";import{Q as h}from"./QSeparator.2cfd8ebb.js";import{Q as K,a as z}from"./QItem.e09cd2b0.js";import{Q as W}from"./QCardActions.13081c02.js";import{Q as X}from"./QCard.f7479d0b.js";import{u as Y}from"./index.2fd68c4e.js";import"./use-key-composition.504026ef.js";import"./use-dark.508530b9.js";import"./use-id.0adc5cff.js";import"./uid.42677368.js";import"./use-form.1b9f1aa5.js";import"./QList.ff45222d.js";import"./rtl.b51694b1.js";import"./QItemLabel.ca6e7a19.js";import"./format.9eaaa398.js";import"./QCheckbox.471cb50a.js";import"./use-cache.b0833c75.js";import"./date.d023faf8.js";import"./use-quasar.da275605.js";import"./axios.a63e1254.js";const Z=q({name:"gatepass",setup(){const e=D(),s=Y(),p=g(()=>e.gatepassinput),m=g(()=>e.gate_pass_items),f=g(()=>e.gatepasscreateitem);return{gatepassstore:e,consumablesstore:s,gatepassinput:p,gate_pass_items:m,gatepasscreateitem:f,options:y([])}},methods:{addItem(){this.gatepasscreateitem.gate_pass_items.unshift(this.gate_pass_items),this.gatepassstore.closeAddGatepassDialog()},filterFn(e,s,p){s(()=>{e===""?this.options=y([]):this.consumablesstore.searchConsumable(e)})},updateModelValue(e){this.gate_pass_items.description=e;let s=this.consumablesstore.consumablesearchresults.find(p=>p.id===e);this.gate_pass_items.description_label=s.name}}}),x=r("h6",null,"Add Gatepass Item",-1);function ee(e,s,p,m,f,k){const _=v("q-row");return d(),b(A,{class:"q-pa-sm"},{default:t(()=>[a(N,{modelValue:e.gatepassstore.addgatepassdialog,"onUpdate:modelValue":s[1]||(s[1]=l=>e.gatepassstore.addgatepassdialog=l),"backdrop-filter":"blur(4px)",persistent:""},{default:t(()=>[a(X,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[a(C,null,{default:t(()=>[x]),_:1}),a(h),i(" "+$(e.gate_pass_items)+" ",1),a(C,{class:"scroll"},{default:t(()=>[(d(!0),G(I,null,F(e.gatepassinput,l=>(d(),b(_,{class:"q-gutter-xs",key:l.name},{default:t(()=>[l.name==="quantity"?(d(),b(c,{key:0,filled:"",label:l.label,modelValue:e.gate_pass_items[l.name],"onUpdate:modelValue":o=>e.gate_pass_items[l.name]=o,type:"number"},{prepend:t(()=>[a(n,{name:l.icon,color:"black"},null,8,["name"])]),_:2},1032,["label","modelValue","onUpdate:modelValue"])):l.name!="quantity"?(d(),b(c,{key:1,filled:"",label:l.label,modelValue:e.gate_pass_items[l.name],"onUpdate:modelValue":o=>e.gate_pass_items[l.name]=o},{prepend:t(()=>[a(n,{name:l.icon,color:"black"},null,8,["name"])]),_:2},1032,["label","modelValue","onUpdate:modelValue"])):w("",!0),l.type==="select"?(d(),b(Q,{key:2,label:l.label,modelValue:e.gate_pass_items[l.name],"onUpdate:modelValue":[o=>e.gate_pass_items[l.name]=o,e.updateModelValue],"use-input":"","hide-selected":"",filled:"","fill-input":"","map-options":"","emit-value":"","input-debounce":"0",options:e.consumablesstore.consumableOptions,onFilter:e.filterFn},{"no-option":t(()=>[a(K,null,{default:t(()=>[a(z,{class:"text-grey"},{default:t(()=>[i(" No results ")]),_:1})]),_:1})]),prepend:t(()=>[a(n,{name:l.icon,color:"black"},null,8,["name"])]),_:2},1032,["label","modelValue","onUpdate:modelValue","options","onFilter"])):w("",!0)]),_:2},1024))),128))]),_:1}),a(h),a(W,{align:"left"},{default:t(()=>[a(u,{outline:"",label:"Close",color:"red",onClick:s[0]||(s[0]=l=>e.gatepassstore.closeAddGatepassDialog())}),a(u,{outline:"",label:"Add",color:"blue",onClick:e.addItem},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue","backdrop-filter"])]),_:1})}var ae=U(Z,[["render",ee]]);const se=q({name:"gatepass",setup(){const e=R(),s=E(),p=j(),m=D(),f=J(),k=e[B().type.name],_=g(()=>m.createtablecolumn),l=g(()=>m.createtablerows),o=g(()=>f.preparedByOptions),S=g(()=>m.gatepasscreateitem);return{formheaders:e,locationstore:s,userstore:p,gatepassstore:m,loginstore:f,formHeader:k,createtablecolumn:_,createtablerows:l,preparedByOptions:o,gatepasscreateitem:S}},components:{FormHeaderVue:T,AddGatepassDialog:ae}}),te={class:"row items-center"},oe={class:"col q-pa-sm"},le={class:"col q-pa-sm"},re={class:"col q-pa-sm"},ne={class:"col q-pa-sm"},pe={class:"row items-center justify-end"},me={class:"q-pt-md"},de={class:"row items-center"},ie={class:"col q-pa-sm"},ue={class:"col q-pa-sm"},ce={class:"row items-center"},ge={class:"col q-pa-sm"};function fe(e,s,p,m,f,k){const _=v("form-header-vue"),l=v("AddGatepassDialog");return d(),b(A,{class:"q-pa-sm"},{default:t(()=>[a(_,{headers:e.formHeader.headers,name:`Create ${e.formHeader.name}`},null,8,["headers","name"]),i(" "+$(e.gatepasscreateitem)+" ",1),r("div",te,[r("div",oe,[a(c,{modelValue:e.gatepasscreateitem.gp_number,"onUpdate:modelValue":s[0]||(s[0]=o=>e.gatepasscreateitem.gp_number=o),label:"Gate Pass Number"},{prepend:t(()=>[a(n,{name:"123",color:"black"})]),_:1},8,["modelValue"])]),r("div",le,[a(c,{modelValue:e.gatepasscreateitem.please_allow,"onUpdate:modelValue":s[1]||(s[1]=o=>e.gatepasscreateitem.please_allow=o),label:"Please Allow Mr/Mrs"},{prepend:t(()=>[a(n,{name:"person",color:"black"})]),_:1},8,["modelValue"])]),r("div",re,[a(Q,{label:"Location",options:e.locationstore.locationOptions,"map-options":"","emit-value":"",modelValue:e.gatepasscreateitem.location,"onUpdate:modelValue":s[2]||(s[2]=o=>e.gatepasscreateitem.location=o)},{prepend:t(()=>[a(n,{name:"map",color:"black"})]),_:1},8,["options","modelValue"])]),r("div",ne,[a(c,{class:"fit",modelValue:e.gatepasscreateitem.date,"onUpdate:modelValue":s[4]||(s[4]=o=>e.gatepasscreateitem.date=o),label:"Date"},{prepend:t(()=>[a(n,{name:"event",class:"cursor-pointer",color:"black"},{default:t(()=>[a(O,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[a(L,{modelValue:e.gatepasscreateitem.date,"onUpdate:modelValue":s[3]||(s[3]=o=>e.gatepasscreateitem.date=o),mask:e.gatepassstore.dateFormat,"today-btn":""},{default:t(()=>[r("div",pe,[P(a(u,{label:"Close",color:"black",flat:""},null,512),[[M]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),r("div",me,[a(H,{rows:e.gatepasscreateitem.gate_pass_items,columns:e.createtablecolumn,"row-key":"item_number",separator:"vertical","auto-width":"",flat:"",bordered:""},{"top-right":t(()=>[a(u,{class:"q-mr-sm",color:"primary",icon:"add",onClick:s[5]||(s[5]=o=>e.gatepassstore.openAddGatepassDialog())},{default:t(()=>[a(V,{class:"bg-accent"},{default:t(()=>[i("Add Item")]),_:1})]),_:1}),a(u,{class:"q-mr-sm",color:"primary",icon:"remove"},{default:t(()=>[a(V,{class:"bg-accent"},{default:t(()=>[i("Remove Item")]),_:1})]),_:1}),a(u,{class:"q-mr-sm",color:"primary",icon:"restart_alt",onClick:s[6]||(s[6]=o=>e.gatepassstore.reset())},{default:t(()=>[a(V,{class:"bg-accent"},{default:t(()=>[i("Reset")]),_:1})]),_:1}),a(u,{class:"q-mr-sm",color:"primary",icon:"save"},{default:t(()=>[a(V,{class:"bg-accent"},{default:t(()=>[i("Save")]),_:1})]),_:1})]),_:1},8,["rows","columns"])]),r("div",de,[r("div",ie,[a(c,{modelValue:e.gatepasscreateitem.purpose,"onUpdate:modelValue":s[7]||(s[7]=o=>e.gatepasscreateitem.purpose=o),label:"Purpose"},{prepend:t(()=>[a(n,{name:"badge",color:"black"})]),_:1},8,["modelValue"])]),r("div",ue,[a(c,{modelValue:e.gatepasscreateitem.remarks,"onUpdate:modelValue":s[8]||(s[8]=o=>e.gatepasscreateitem.remarks=o),label:"Remarks"},{prepend:t(()=>[a(n,{name:"description",color:"black"})]),_:1},8,["modelValue"])])]),r("div",ce,[r("div",ge,[a(Q,{label:"Prepared By",options:e.preparedByOptions,"map-options":"","emit-value":"",modelValue:e.gatepasscreateitem.prepared_by,"onUpdate:modelValue":s[9]||(s[9]=o=>e.gatepasscreateitem.prepared_by=o)},{prepend:t(()=>[a(n,{name:"fact_check",color:"black"})]),_:1},8,["options","modelValue"])])]),a(l)]),_:1})}var ze=U(se,[["render",fe]]);export{ze as default};
