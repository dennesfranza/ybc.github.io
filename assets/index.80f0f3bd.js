import{aU as t,af as d}from"./index.5df2bc92.js";import{b as r}from"./axios.a63e1254.js";import{u as n}from"./index.ab165816.js";var s={dateFormat:"YYYY-MM-DD",tableindexcolumns:[{name:"date",label:"Date",field:"date",align:"left"},{name:"invoice_number",label:"Invoice Number",field:"invoice_number",align:"left"},{name:"address",label:"Address",field:e=>e.address.name,align:"left"},{name:"prepared_by",label:"Prepared By",field:e=>e.prepared_by.name,align:"left"},{name:"delivered_by",label:"Delivered By",field:e=>e.delivered_by.name,align:"left"}],tableindexrows:[],tablecreatecolumns:[{name:"rs_number_label",label:"RS Number",field:"rs_number_label",align:"left"},{name:"quantity",label:"Quantity",field:"quantity",align:"left"},{name:"description_label",label:"Description",field:"description_label",align:"left"},{name:"remarks",label:"Remarks",field:"remarks",align:"left"}],tablecreaterows:[],deliveryreceiptdetails:{id:null,invoice_number:null,date:null,delivered_to:null,received_date:null,address:null,delivered_by:null,noted_by:null,prepared_by:null,received_by:null},deliveryreceiptdetailsitems:[],deliveryreceiptpayload:{invoice_number:null,date:null,address:null,prepared_by:null,delivery_receipt_items:[]},delivery_receipt_item:{rs_number:null,rs_number_label:null,quantity:0,description:null,description_label:null,remarks:null},listallitemstableloading:!1,postdeliveryreceiptitemloading:!1,deliveryreceiptdialog:!1,deliveryreceiptdetailspagedialog:!1,deliveryreceiptdetailsloadingpage:!1,deliveryreceiptaddquantityremarksdialog:!1,deliveryreceiptinput:[{name:"rs_number",label:"RS Number",icon:"",type:"select"},{name:"quantity",label:"Quantity",icon:"",type:"input"},{name:"description",label:"Description",icon:"",type:"input"}],deliveryreceiptdetailscolumns:[{name:"rs_number",label:"RS Number",field:e=>e.rs_number.rs_number,align:"left"},{name:"quantity",label:"Quantity",field:"quantity",align:"left"},{name:"description",label:"Description",field:e=>e.description.name,align:"left"},{name:"remarks",label:"Remarks",field:"remarks",align:"left"}],selected:[],deliveryreceiptsearchcolumns:[{name:"item_number",label:"Item Number",field:"item_number",align:"left"},{name:"quantity",label:"Quantity",field:"quantity",align:"left"},{name:"unit",label:"Unit",field:"unit",align:"left"},{name:"description",label:"Description",field:e=>e.description.name,align:"left"},{name:"purpose",label:"Purpose",field:"purpose",align:"left"}],deliveryreceiptsearchrows:[],deliveryreceiptsearchtableloading:!1,rssearchnumber:"",selected:[],addremarksdialog:!1,deliverynumber:null};const o=e=>{e.listallitemstableloading=!0,r.get("deliveryreceipt/").then(l=>{console.log(l),e.tableindexrows=l.data.results}).catch(l=>{console.log(l)}).finally(()=>{e.listallitemstableloading=!1})},c=(e,l)=>{r.get(`deliveryreceipt/${l}/`).then(i=>{i.status===200&&(console.log(i),e.deliveryreceiptdetails.id=i.data.id,e.deliveryreceiptdetails.date=i.data.date,e.deliveryreceiptdetails.invoice_number=i.data.invoice_number,e.deliveryreceiptdetails.received_date=i.data.received_date,e.deliveryreceiptdetails.address=i.data.address.name,e.deliveryreceiptdetailsitems=i.data.delivery_receipt_items,e.deliveryreceiptdetails.prepared_by=i.data.prepared_by.name,e.deliveryreceiptdetails.delivered_by=i.data.delivered_by,e.deliveryreceiptdetails.noted_by=i.data.noted_by.name,e.deliveryreceiptdetails.received_by=i.data.received_by.name)}).catch(i=>{console.log(i)}).finally(()=>{setTimeout(()=>{e.deliveryreceiptdetailsloadingpage=!1},2e3)})},m=e=>{e.deliveryreceiptdialog=!0},y=e=>{const l=n();e.deliveryreceiptdialog=!1,l.rsnumbersearchresults=[],e.delivery_receipt_item={rs_number:null,rs_number_label:null,quantity:null,description:null}},p=(e,l)=>{let i=e.delivery_receipt_item;e.deliveryreceiptpayload.delivery_receipt_items.push(i),e.delivery_receipt_item={rs_number:null,rs_number_label:null,quantity:0,description:null,description_label:null,remarks:null}},u=e=>{e.postdeliveryreceiptitemloading=!0,r.post("deliveryreceipt/",e.deliveryreceiptpayload).then(l=>{t.create({timeout:1500,position:"center",color:"primary",message:"Delivery Receipt Saved"})}).catch(l=>{t.create({timeout:1500,position:"center",color:"red",message:`Error: ${JSON.stringify(l.response.data)}`})}).finally(()=>{e.deliveryreceiptpayload={invoice_number:null,date:null,address:null,prepared_by:null,delivery_receipt_items:[]},e.postdeliveryreceiptitemloading=!1,setTimeout(()=>{e.router.push({path:"/DeliveryReceipts"})},1e3)})},v=e=>{e.deliveryreceiptdetailspagedialog=!0,e.deliveryreceiptdetailsloadingpage=!0},b=e=>{e.deliveryreceiptdetails={id:null,date:null,delivered_to:null,received_date:null,address:null,delivered_by:null,noted_by:null,prepared_by:null,received_by:null},e.deliveryreceiptdetailsitems=[],e.deliveryreceiptdetailspagedialog=!1},_=(e,l)=>{e.deliveryreceiptsearchtableloading=!0,r.get(`delivery-search-rsnumber-consumable/?search=${l}`).then(i=>{i.status===200&&(console.log(i.data),e.deliveryreceiptsearchrows=i.data)}).catch(i=>{console.log(i)}).finally(()=>{setTimeout(()=>{e.deliveryreceiptsearchtableloading=!1},2e3)})},g=e=>{e.deliveryreceiptaddquantityremarksdialog=!0},f=e=>{e.deliveryreceiptaddquantityremarksdialog=!1,e.delivery_receipt_item={rs_number:null,rs_number_label:null,quantity:0,description:null,description_label:null,remarks:null}},D=e=>{e.deliveryreceiptpayload={invoice_number:null,date:null,address:null,prepared_by:null,delivery_receipt_items:[]}},h=e=>{let l=e.deliveryreceiptpayload.delivery_receipt_items.findIndex(i=>i.description_label===e.selected[0]);e.deliveryreceiptpayload.delivery_receipt_items.splice(l,1)},k=(e,l)=>{console.log(e.selected[0]);let i=e.deliveryreceiptpayload.delivery_receipt_items.findIndex(a=>a.description_label===e.selected[0].description_label);console.log(i),e.deliveryreceiptpayload.delivery_receipt_items[i].remarks=l},R=e=>{e.addremarksdialog=!1},I=e=>{e.addremarksdialog=!0},q=e=>{r.get("delivery-generate-number/").then(l=>{l.status===200&&(e.deliveryreceiptpayload.invoice_number=l.data)}).catch(l=>{t.create({timeout:1500,position:"center",color:"red",message:`Error: ${JSON.stringify(l.response.data)}`})})},x=d("deliveryreceipt",{state:()=>s,getters:{deliveryGetItems:e=>e.deliveryreceiptdetailsitems.map(l=>({id:l.id,description:l.description.id,description_label:l.description.name,quantity:l.quantity,remarks:"",suppliers_name:""})),hasSelection:e=>e.selected.length>0},actions:{getAllDeliveryItems(){o(this)},retrieveDeliveryItem(e){c(this,e)},openAddDeliveryDialog(){m(this)},closeAddDeliveryDialog(){y(this)},addDeliveryItem(){p(this)},postItem(){u(this)},openDeliveryDetailsDialog(){v(this)},closeDeliveryDetailsDialog(){b(this)},searchDeliveryRsOrItem(e){_(this,e)},openQuantityRemarksDialog(){g(this)},closeQuantityRemarksDialog(){f(this)},resetCreateItem(){D(this)},removeItem(){h(this)},addRemarksToItems(e){k(this,e)},closeAddRemarksDialog(){R(this)},openAddRemarksDialog(){I(this)},generateDeliveryNumber(){q(this)}}});export{x as u};
