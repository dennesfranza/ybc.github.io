import{aU as t,af as n}from"./index.7c7b8282.js";import{b as r}from"./axios.56601fbe.js";var o={dateFormat:"YYYY-MM-DD",tableindexcolumns:[{name:"rr_no",label:"Receiving Report Number",field:"rr_no",align:"left"},{name:"invoice_dr_no",label:"Invoice Number",field:e=>e.invoice_dr_no.invoice_number,align:"left"},{name:"report_from",label:"Report From",field:e=>e.report_from.name,align:"left"},{name:"received_by",label:"Received By",field:e=>e.received_by.name,align:"left"}],tableindexrows:[],tablecreatecolumns:[{name:"description_label",label:"Description",field:"description_label",align:"left"},{name:"quantity",label:"Quantity",field:"quantity",align:"left"},{name:"suppliers_name",label:"Suppliers Name",field:"suppliers_name",align:"left"},{name:"remarks",label:"Remarks",field:"remarks",align:"left"}],tabledetailscolumns:[{name:"description",label:"Description",field:e=>e.description.name,align:"left"},{name:"quantity",label:"Quantity",field:"quantity",align:"left"},{name:"suppliers_name",label:"Suppliers Name",field:"suppliers_name",align:"left"},{name:"remarks",label:"Remarks",field:"remarks",align:"left"}],searchresultstablecolumn:[{name:"description_label",label:"Description",field:"description_label",align:"left"},{name:"quantity",label:"Quantity",field:"quantity",align:"left"}],tablecreaterows:[],receivingdetails:{},receivingdetailsitems:[],receivingpayload:{rr_no:null,date:null,report_from:null,invoice_dr_no:null,received_by:null,receiving_report_items:[]},receivingpayloaditems:{quantity:null,description:null,suppliers_name:null,remarks:null},listitemsloading:!1,postitemloading:!1,updateitemloading:!1,retrieveitemloading:!1,deleteitemloading:!1,additemdialog:!1,detailsdialog:!1,detailsloading:!1,selected:[],receivinginput:[{name:"quantity",label:"Quantity",icon:"",type:"input"}],deliverynumbersearchresults:[],deliverynumbersearchloading:!1,deliverynumbersearchnumber:"",addsupplierdialog:!1,addremarksdialog:!1,confirmedloading:!1,verifiedloading:!1};const d=e=>{e.listitemsloading=!0,r.get("receivingreport/").then(a=>{a.status===200&&(e.tableindexrows=a.data.results)}).catch(a=>{t.create({timeout:1500,position:"center",color:"red",message:`Error: ${a}`})}).finally(()=>{setTimeout(()=>{e.listitemsloading=!1},1e3)})},s=(e,a)=>{e.retrieveitemloading=!0,r.get(`receivingreport/${a}/`).then(i=>{i.status===200&&(e.receivingdetails=i.data,e.receivingdetails={rr_no:i.data.rr_no,date:i.data.date,report_from:i.data.report_from.name,invoice_dr_no:i.data.invoice_dr_no.invoice_number,received_by:i.data.received_by===null?"":i.data.received_by.name,confirmed_by:i.data.confirmed_by===null?"":i.data.confirmed_by.name,verified_by:i.data.verified_by===null?"":i.data.verified_by.name,receiving_report_items:i.data.receiving_report_items})}).catch(i=>{t.create({timeout:1500,position:"center",color:"red",message:`Error: ${i}`})}).finally(()=>{setTimeout(()=>{e.retrieveitemloading=!1},1e3)})},c=e=>{e.postitemloading=!0,r.post("receivingreport/",e.receivingpayload).then(a=>{a.status===200&&(console.log(a),t.create({timeout:1500,position:"center",color:"primary",message:"Receiving Report Saved"}))}).catch(a=>{t.create({timeout:1500,position:"center",color:"red",message:`Error: ${JSON.stringify(a.response.data)}`})}).finally(()=>{e.postitemloading=!1,e.receivingpayload={rr_no:null,date:null,report_from:null,invoice_dr_no:null,received_by:null,receiving_report_items:[]},e.tablecreaterows=[],setTimeout(()=>{e.router.push({path:"/ReceivingReport"})},1e3)})},m=e=>{e.additemdialog=!0},g=e=>{e.additemdialog=!1},u=(e,a)=>{e.tablecreaterows=a,e.receivingpayload.receiving_report_items=a,e.deliverynumbersearchresults=[],e.deliveryresultitems=[],e.additemdialog=!1},f=e=>{e.detailsdialog=!0},p=e=>{e.detailsdialog=!1},v=(e,a)=>{e.deliverynumbersearchloading=!0,r.get(`delivery-number-search/?search=${a}`).then(i=>{i.status===200&&(console.log(i),e.deliverynumbersearchresults=i.data.results)}).catch(i=>{console.log(i)}).finally(()=>{setTimeout(()=>{e.deliverynumbersearchloading=!1},1500)})},_=e=>{e.addsupplierdialog=!0},b=e=>{e.addremarksdialog=!0},y=e=>{e.addsupplierdialog=!1},h=e=>{e.addremarksdialog=!1},R=(e,a)=>{e.receivingpayload.receiving_report_items.forEach(l=>{l.suppliers_name=a}),e.addsupplierdialog=!1},D=(e,a)=>{e.receivingpayload.receiving_report_items.forEach(l=>{l.remarks=a}),e.addremarksdialog=!1},I=e=>{e.receivingpayload={rr_no:null,date:null,report_from:null,invoice_dr_no:null,received_by:null,receiving_report_items:[]},e.tablecreaterows=[]},A=(e,a)=>{e.confirmedloading=!0,r.put(`receivingreport-confirmed/${a}/`).then(i=>{i.status===200&&(e.tableindexrows.findIndex(l=>l.id===i.data.id),console.log(i))}).catch(i=>{t.create({timeout:1500,position:"center",color:"red",message:`Error: ${JSON.stringify(i.response.data)}`})}).finally(()=>{setTimeout(()=>{e.confirmedloading=!1},1500)})},k=(e,a)=>{e.verifiedloading=!0,r.put(`receivingreport-verified/${a}/`).then(i=>{i.status===200&&console.log(i)}).catch(i=>{t.create({timeout:1500,position:"center",color:"red",message:`Error: ${JSON.stringify(i.response.data)}`})}).finally(()=>{setTimeout(()=>{e.verifiedloading=!1},1500)})},N=n("receiving",{state:()=>o,getters:{deliveryNumberOptions:e=>e.deliverynumbersearchresults.map(a=>({label:a.invoice_number,value:a.id})),hasSelectedReportItems:e=>e.receivingpayload.receiving_report_items.length>0,hasSelection:e=>e.selected.length>0},actions:{getAllReceivingReportItems(){d(this)},retrieveReceivingReportItem(e){s(this,e)},createReceivingReportItem(){c(this)},updateReceivingReportItem(){},removeReceivingReportItem(){},openAddReceivingItemDialog(){m(this)},closeAddReceivingItemDialog(){g(this)},addItemToCreate(e){u(this,e)},openReceivingDetailsDialog(){f(this)},closeReceivingDetailsDialog(){p(this)},updateConfirmedBy(){},updateVerifiedBy(){},searchDeliveryNumber(e){v(this,e)},openAddSupplierDialog(){_(this)},openAddRemarksDialog(){b(this)},closeAddSupplierDialog(){y(this)},closeAddRemarksDialog(){h(this)},addSupplierToItems(e){R(this,e)},addRemarksToItems(e){D(this,e)},reset(){I(this)},updateConfirmedBy(e){A(this,e)},updateVerifiedBy(e){k(this,e)}}});export{N as u};
