import{Q as R}from"./QInnerLoading.3c8a4032.js";import{d as C,g as B,c as d,_ as h,M as w,C as a,G as u,H as l,f as o,J as s,Q as y,N as v,o as D,D as k,O as p,K as g}from"./index.834e57e7.js";import{Q as t}from"./QInput.3adc570b.js";import{Q as f}from"./QTooltip.7869642a.js";import{Q,e as I}from"./QTable.fc905379.js";import{Q as $}from"./QPage.2b43f395.js";import{u as q}from"./index.1afe301b.js";import{Q as b}from"./QCardSection.b35a0002.js";import{Q as S}from"./QCardActions.6e08bd30.js";import{Q as U}from"./QSpinnerGears.6cc31471.js";import{Q as N}from"./QCard.90c0a547.js";import{u as H,F}from"./FormHeader.35f5a2b6.js";import"./use-dark.3a8cdb55.js";import"./format.2e604a71.js";import"./QSeparator.771723a9.js";import"./use-id.8bff53a2.js";import"./uid.42677368.js";import"./use-key-composition.c129f1c2.js";import"./use-form.534894e6.js";import"./QList.9f1dfa09.js";import"./rtl.b51694b1.js";import"./QItem.e5da3e33.js";import"./QItemLabel.932b52ee.js";import"./QCheckbox.bc6af6e4.js";import"./axios.473f2f39.js";import"./use-quasar.34ea7664.js";const A=C({name:"receivingreport",setup(){const e=H(),i=e[B().type.name],n=q(),m=d(()=>n.receivingdetails);return{formheaders:e,formHeader:i,receivingstore:n,receivingdetails:m}},components:{FormHeaderVue:F}}),G={class:"row items-center"},L={class:"col q-pa-sm"},P={class:"col q-pa-sm"},T={class:"col q-pa-sm"},z={class:"q-pt-md"},M={class:"row items-center"},E={class:"col q-pa-sm"},J={class:"col q-pa-sm"},K={class:"col q-pa-sm"},O={class:"col q-pa-sm"};function j(e,i,n,m,V,_){const c=w("form-header-vue");return a(),u($,{class:"q-pa-sm"},{default:l(()=>[o(I,{modelValue:e.receivingstore.detailsdialog,"onUpdate:modelValue":i[8]||(i[8]=r=>e.receivingstore.detailsdialog=r),persistent:"",maximized:""},{default:l(()=>[o(N,null,{default:l(()=>[o(b,null,{default:l(()=>[o(c,{headers:e.formHeader.headers,name:e.formHeader.name},null,8,["headers","name"])]),_:1}),o(b,null,{default:l(()=>[s("div",G,[s("div",L,[o(t,{modelValue:e.receivingdetails.rr_no,"onUpdate:modelValue":i[0]||(i[0]=r=>e.receivingdetails.rr_no=r),label:"RR Number",readonly:""},null,8,["modelValue"])]),s("div",P,[o(t,{modelValue:e.receivingdetails.invoice_dr_no,"onUpdate:modelValue":i[1]||(i[1]=r=>e.receivingdetails.invoice_dr_no=r),label:"Invoice/DR Number",readonly:""},null,8,["modelValue"])]),s("div",T,[o(t,{class:"fit",modelValue:e.receivingdetails.date,"onUpdate:modelValue":i[2]||(i[2]=r=>e.receivingdetails.date=r),label:"Date",readonly:""},{prepend:l(()=>[o(y,{name:"event"})]),_:1},8,["modelValue"])])])]),_:1}),o(b,null,{default:l(()=>[s("div",z,[o(Q,{rows:e.receivingdetails.receiving_report_items,columns:e.receivingstore.tabledetailscolumns,"row-key":"item_number",separator:"vertical","auto-width":"",flat:"",bordered:""},null,8,["rows","columns"])])]),_:1}),o(b,null,{default:l(()=>[s("div",M,[s("div",E,[o(t,{modelValue:e.receivingdetails.received_by,"onUpdate:modelValue":i[3]||(i[3]=r=>e.receivingdetails.received_by=r),label:"Received By",readonly:""},null,8,["modelValue"])]),s("div",J,[o(t,{modelValue:e.receivingdetails.confirmed_by,"onUpdate:modelValue":i[4]||(i[4]=r=>e.receivingdetails.confirmed_by=r),label:"Confirmed By",readonly:""},{prepend:l(()=>[o(y,{name:"fact_check",color:"black"})]),_:1},8,["modelValue"])]),s("div",K,[o(t,{modelValue:e.receivingdetails.report_from,"onUpdate:modelValue":i[5]||(i[5]=r=>e.receivingdetails.report_from=r),label:"Report From",readonly:""},null,8,["modelValue"])]),s("div",O,[o(t,{modelValue:e.receivingdetails.verified_by,"onUpdate:modelValue":i[6]||(i[6]=r=>e.receivingdetails.verified_by=r),label:"Verified By (Purchasing)",readonly:""},{prepend:l(()=>[o(y,{name:"fact_check",color:"black"})]),_:1},8,["modelValue"])])])]),_:1}),o(S,null,{default:l(()=>[o(v,{outline:"",label:"Close",color:"red",onClick:i[7]||(i[7]=r=>e.receivingstore.closeReceivingDetailsDialog())})]),_:1}),o(R,{showing:e.receivingstore.retrieveitemloading},{default:l(()=>[o(U,{size:"50px",color:"primary"})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}var W=h(A,[["render",j]]);const X=C({name:"receivingreport",setup(){const e=q(),i=d(()=>e.tableindexcolumns),n=d(()=>e.tableindexrows),m=d(()=>e.listitemsloading),V=d({get:()=>e.selected,set:c=>e.selected=c}),_=d(()=>e.hasSelection);return D(()=>e.getAllReceivingReportItems()),{receivingstore:e,tableindexcolumns:i,tableindexrows:n,listitemsloading:m,selected:V,hasSelection:_}},methods:{onRowClick(e,i,n){this.receivingstore.openReceivingDetailsDialog(),this.receivingstore.retrieveReceivingReportItem(i.id)},onClickConfirmedBy(){this.receivingstore.updateConfirmedBy(this.selected[0].id)},onClickVerifiedBy(){this.receivingstore.updateVerifiedBy(this.selected[0].id)}},components:{ReceivingReportDetails:W}}),Y={class:"row items-center"},Z={class:"col items-center"},x={class:"row"},ee={key:0},oe={key:1};function ie(e,i,n,m,V,_){const c=w("ReceivingReportDetails");return a(),u($,{class:"q-pa-sm"},{default:l(()=>[s("div",Y,[s("div",Z,[s("div",x,[e.$q.platform.is.desktop?(a(),k("h2",ee,"Receiving Report")):p("",!0),e.$q.platform.is.mobile?(a(),k("h6",oe,"Receiving Report")):p("",!0)])])]),o(Q,{title:"Receiving List","row-key":"id",selection:"single",columns:e.tableindexcolumns,rows:e.tableindexrows,separator:"vertical",loading:e.listitemsloading,"auto-width":"",flat:"",bordered:"",selected:e.selected,"onUpdate:selected":i[2]||(i[2]=r=>e.selected=r),onRowClick:e.onRowClick},{loading:l(()=>[o(R,{showing:"",color:"primary"})]),"top-right":l(()=>[o(t,{class:"q-mr-sm",dense:"",debounce:"500",modelValue:e.indextablefilter,"onUpdate:modelValue":i[0]||(i[0]=r=>e.indextablefilter=r),placeholder:"Search",outlined:""},{append:l(()=>[o(y,{name:"search"})]),_:1},8,["modelValue"]),e.hasSelection?(a(),u(v,{key:0,class:"q-mr-sm",color:"primary",icon:"remove"},{default:l(()=>[o(f,{class:"bg-accent"},{default:l(()=>[g("Remove Item")]),_:1})]),_:1})):p("",!0),e.hasSelection?(a(),u(v,{key:1,class:"q-mr-sm",color:"primary",icon:"fact_check",loading:e.receivingstore.confirmedloading,onClick:e.onClickConfirmedBy},{default:l(()=>[o(f,{class:"bg-accent"},{default:l(()=>[g("Confirmed")]),_:1})]),_:1},8,["loading","onClick"])):p("",!0),e.hasSelection?(a(),u(v,{key:2,class:"q-mr-sm",color:"primary",icon:"done_all",loading:e.receivingstore.verifiedloading,onClick:e.onClickVerifiedBy},{default:l(()=>[o(f,{class:"bg-accent"},{default:l(()=>[g("Verified")]),_:1})]),_:1},8,["loading","onClick"])):p("",!0),o(v,{class:"q-mr-sm",color:"primary",icon:"sync",onClick:i[1]||(i[1]=r=>e.receivingstore.getAllReceivingReportItems())},{default:l(()=>[o(f,{class:"bg-accent"},{default:l(()=>[g("Get Latest Data")]),_:1})]),_:1})]),_:1},8,["columns","rows","loading","selected","onRowClick"]),o(c)]),_:1})}var Be=h(X,[["render",ie]]);export{Be as default};
